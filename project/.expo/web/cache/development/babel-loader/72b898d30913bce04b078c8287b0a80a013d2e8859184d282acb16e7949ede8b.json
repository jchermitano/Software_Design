{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport { isObject, deepGet, deepExists } from \"../../utils\";\nvar DataSnapshot = function () {\n  function DataSnapshot(ref, snapshot) {\n    _classCallCheck(this, DataSnapshot);\n    this.key = snapshot.key;\n    if (ref.key !== snapshot.key) {\n      this.ref = ref.child(snapshot.key);\n    } else {\n      this.ref = ref;\n    }\n    this._value = snapshot.value;\n    this._priority = snapshot.priority === undefined ? null : snapshot.priority;\n    this._childKeys = snapshot.childKeys || [];\n  }\n  return _createClass(DataSnapshot, [{\n    key: \"val\",\n    value: function val() {\n      if (isObject(this._value) || Array.isArray(this._value)) {\n        return JSON.parse(JSON.stringify(this._value));\n      }\n      return this._value;\n    }\n  }, {\n    key: \"exportVal\",\n    value: function exportVal() {\n      var value = this._value;\n      if (isObject(this._value) || Array.isArray(this._value)) {\n        value = JSON.parse(JSON.stringify(this._value));\n      }\n      return {\n        '.value': value,\n        '.priority': this._priority\n      };\n    }\n  }, {\n    key: \"child\",\n    value: function child(path) {\n      var value = deepGet(this._value, path);\n      if (value === undefined) value = null;\n      var childRef = this.ref.child(path);\n      return new DataSnapshot(childRef, {\n        value: value,\n        key: childRef.key,\n        exists: value !== null,\n        childKeys: isObject(value) && value !== null ? Object.keys(value) : []\n      });\n    }\n  }, {\n    key: \"exists\",\n    value: function exists() {\n      return this._value !== null;\n    }\n  }, {\n    key: \"forEach\",\n    value: function forEach(action) {\n      if (!this._childKeys.length) return false;\n      var cancelled = false;\n      for (var i = 0, len = this._childKeys.length; i < len; i++) {\n        var key = this._childKeys[i];\n        var childSnapshot = this.child(key);\n        var returnValue = action(childSnapshot);\n        if (returnValue === true) {\n          cancelled = true;\n          break;\n        }\n      }\n      return cancelled;\n    }\n  }, {\n    key: \"getPriority\",\n    value: function getPriority() {\n      return this._priority;\n    }\n  }, {\n    key: \"hasChild\",\n    value: function hasChild(path) {\n      return deepExists(this._value, path);\n    }\n  }, {\n    key: \"hasChildren\",\n    value: function hasChildren() {\n      return this.numChildren() > 0;\n    }\n  }, {\n    key: \"numChildren\",\n    value: function numChildren() {\n      if (!isObject(this._value)) return 0;\n      return Object.keys(this._value).length;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return this.val();\n    }\n  }]);\n}();\nexport { DataSnapshot as default };","map":{"version":3,"names":["isObject","deepGet","deepExists","DataSnapshot","ref","snapshot","_classCallCheck","key","child","_value","value","_priority","priority","undefined","_childKeys","childKeys","_createClass","val","Array","isArray","JSON","parse","stringify","exportVal","path","childRef","exists","Object","keys","forEach","action","length","cancelled","i","len","childSnapshot","returnValue","getPriority","hasChild","hasChildren","numChildren","toJSON","default"],"sources":["C:/Users/Johnny Hermitano/Documents/GitHub/sofdes_watermelon/project/node_modules/react-native-firebase/dist/modules/database/DataSnapshot.js"],"sourcesContent":["/**\n * \n * DataSnapshot representation wrapper\n */\nimport { isObject, deepGet, deepExists } from '../../utils';\n\n/**\n * @class DataSnapshot\n * @link https://firebase.google.com/docs/reference/js/firebase.database.DataSnapshot\n */\nexport default class DataSnapshot {\n  constructor(ref, snapshot) {\n    this.key = snapshot.key;\n\n    if (ref.key !== snapshot.key) {\n      this.ref = ref.child(snapshot.key);\n    } else {\n      this.ref = ref;\n    } // internal use only\n\n\n    this._value = snapshot.value;\n    this._priority = snapshot.priority === undefined ? null : snapshot.priority;\n    this._childKeys = snapshot.childKeys || [];\n  }\n  /**\n   * Extracts a JavaScript value from a DataSnapshot.\n   * @link https://firebase.google.com/docs/reference/js/firebase.database.DataSnapshot#val\n   * @returns {any}\n   */\n\n\n  val() {\n    // clone via JSON stringify/parse - prevent modification of this._value\n    if (isObject(this._value) || Array.isArray(this._value)) {\n      return JSON.parse(JSON.stringify(this._value));\n    }\n\n    return this._value;\n  }\n  /**\n   * Exports the entire contents of the DataSnapshot as a JavaScript object.\n   *\n   * The exportVal() method is similar to val(), except priority information is\n   * included (if available), making it suitable for backing up your data.\n   *\n   * @return {{'.value': *, '.priority': *}}\n   */\n\n\n  exportVal() {\n    let value = this._value;\n\n    if (isObject(this._value) || Array.isArray(this._value)) {\n      value = JSON.parse(JSON.stringify(this._value));\n    }\n\n    return {\n      '.value': value,\n      '.priority': this._priority\n    };\n  }\n  /**\n   * Gets another DataSnapshot for the location at the specified relative path.\n   * @param path\n   * @link https://firebase.google.com/docs/reference/js/firebase.database.DataSnapshot#forEach\n   * @returns {Snapshot}\n   */\n\n\n  child(path) {\n    // TODO validate path is a string\n    let value = deepGet(this._value, path);\n    if (value === undefined) value = null;\n    const childRef = this.ref.child(path);\n    return new DataSnapshot(childRef, {\n      value,\n      key: childRef.key,\n      exists: value !== null,\n      // TODO this is wrong - child keys needs to be the ordered keys, from FB\n      // TODO potential solution is build up a tree/map of a snapshot and its children\n      // TODO natively and send that back to JS to be use in this class.\n      // null check to keep flow happy even though isObject already does this\n      childKeys: isObject(value) && value !== null ? Object.keys(value) : []\n    });\n  }\n  /**\n   * Returns true if this DataSnapshot contains any data.\n   * @link https://firebase.google.com/docs/reference/js/firebase.database.DataSnapshot#exists\n   * @returns {boolean}\n   */\n\n\n  exists() {\n    return this._value !== null;\n  }\n  /**\n   * Enumerates the top-level children in the DataSnapshot.\n   * @link https://firebase.google.com/docs/reference/js/firebase.database.DataSnapshot#forEach\n   * @param action\n   */\n\n\n  forEach(action) {\n    if (!this._childKeys.length) return false;\n    let cancelled = false;\n\n    for (let i = 0, len = this._childKeys.length; i < len; i++) {\n      const key = this._childKeys[i];\n      const childSnapshot = this.child(key);\n      const returnValue = action(childSnapshot);\n\n      if (returnValue === true) {\n        cancelled = true;\n        break;\n      }\n    }\n\n    return cancelled;\n  }\n  /**\n   * Gets the priority value of the data in this DataSnapshot.\n   * @link https://firebase.google.com/docs/reference/js/firebase.database.DataSnapshot#getPriority\n   * @returns {String|Number|null}\n   */\n\n\n  getPriority() {\n    return this._priority;\n  }\n  /**\n   * Returns true if the specified child path has (non-null) data.\n   * @link https://firebase.google.com/docs/reference/js/firebase.database.DataSnapshot#hasChild\n   * @param path\n   * @returns {Boolean}\n   */\n\n\n  hasChild(path) {\n    return deepExists(this._value, path);\n  }\n  /**\n   * Returns whether or not the DataSnapshot has any non-null child properties.\n   * @link https://firebase.google.com/docs/reference/js/firebase.database.DataSnapshot#hasChildren\n   * @returns {boolean}\n   */\n\n\n  hasChildren() {\n    return this.numChildren() > 0;\n  }\n  /**\n   * Returns the number of child properties of this DataSnapshot.\n   * @link https://firebase.google.com/docs/reference/js/firebase.database.DataSnapshot#numChildren\n   * @returns {Number}\n   */\n\n\n  numChildren() {\n    if (!isObject(this._value)) return 0;\n    return Object.keys(this._value).length;\n  }\n  /**\n   * Returns a JSON-serializable representation of this object.\n   * @link https://firebase.google.com/docs/reference/js/firebase.database.DataSnapshot#toJSON\n   * @returns {any}\n   */\n\n\n  toJSON() {\n    return this.val();\n  }\n\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}