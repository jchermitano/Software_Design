{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport { statics as StorageStatics } from \"./\";\nimport { isFunction } from \"../../utils\";\nexport var UPLOAD_TASK = 'upload';\nexport var DOWNLOAD_TASK = 'download';\nvar StorageTask = function () {\n  function StorageTask(type, promise, storageRef) {\n    _classCallCheck(this, StorageTask);\n    this.type = type;\n    this.ref = storageRef;\n    this.storage = storageRef._storage;\n    this.path = storageRef.path;\n    this.then = promise.then.bind(promise);\n    this.catch = promise.catch.bind(promise);\n  }\n  return _createClass(StorageTask, [{\n    key: \"_interceptSnapshotEvent\",\n    value: function _interceptSnapshotEvent(f) {\n      var _this = this;\n      if (!isFunction(f)) return null;\n      return function (snapshot) {\n        var _snapshot = Object.assign({}, snapshot);\n        _snapshot.task = _this;\n        _snapshot.ref = _this.ref;\n        return f && f(_snapshot);\n      };\n    }\n  }, {\n    key: \"_interceptErrorEvent\",\n    value: function _interceptErrorEvent(f) {\n      if (!isFunction(f)) return null;\n      return function (error) {\n        var _error = new Error(error.message);\n        _error.code = error.code;\n        return f && f(_error);\n      };\n    }\n  }, {\n    key: \"_subscribe\",\n    value: function _subscribe(nextOrObserver, error, complete) {\n      var _this2 = this;\n      var _error;\n      var _next;\n      var _complete;\n      if (typeof nextOrObserver === 'function') {\n        _error = this._interceptErrorEvent(error);\n        _next = this._interceptSnapshotEvent(nextOrObserver);\n        _complete = this._interceptSnapshotEvent(complete);\n      } else if (nextOrObserver) {\n        _error = this._interceptErrorEvent(nextOrObserver.error);\n        _next = this._interceptSnapshotEvent(nextOrObserver.next);\n        _complete = this._interceptSnapshotEvent(nextOrObserver.complete);\n      }\n      if (_next) {\n        this.storage._addListener(this.path, StorageStatics.TaskEvent.STATE_CHANGED, _next);\n      }\n      if (_error) {\n        this.storage._addListener(this.path, `${this.type}_failure`, _error);\n      }\n      if (_complete) {\n        this.storage._addListener(this.path, `${this.type}_success`, _complete);\n      }\n      return function () {\n        if (_next) _this2.storage._removeListener(_this2.path, StorageStatics.TaskEvent.STATE_CHANGED, _next);\n        if (_error) _this2.storage._removeListener(_this2.path, `${_this2.type}_failure`, _error);\n        if (_complete) _this2.storage._removeListener(_this2.path, `${_this2.type}_success`, _complete);\n      };\n    }\n  }, {\n    key: \"on\",\n    value: function on() {\n      var event = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : StorageStatics.TaskEvent.STATE_CHANGED;\n      var nextOrObserver = arguments.length > 1 ? arguments[1] : undefined;\n      var error = arguments.length > 2 ? arguments[2] : undefined;\n      var complete = arguments.length > 3 ? arguments[3] : undefined;\n      if (!event) {\n        throw new Error(\"StorageTask.on listener is missing required string argument 'event'.\");\n      }\n      if (event !== StorageStatics.TaskEvent.STATE_CHANGED) {\n        throw new Error(`StorageTask.on event argument must be a string with a value of '${StorageStatics.TaskEvent.STATE_CHANGED}'`);\n      }\n      if (!nextOrObserver && !error && !complete) {\n        return this._subscribe.bind(this);\n      }\n      return this._subscribe(nextOrObserver, error, complete);\n    }\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      throw new Error('.pause() is not currently supported by react-native-firebase');\n    }\n  }, {\n    key: \"resume\",\n    value: function resume() {\n      throw new Error('.resume() is not currently supported by react-native-firebase');\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      throw new Error('.cancel() is not currently supported by react-native-firebase');\n    }\n  }]);\n}();\nexport { StorageTask as default };","map":{"version":3,"names":["statics","StorageStatics","isFunction","UPLOAD_TASK","DOWNLOAD_TASK","StorageTask","type","promise","storageRef","_classCallCheck","ref","storage","_storage","path","then","bind","catch","_createClass","key","value","_interceptSnapshotEvent","f","_this","snapshot","_snapshot","Object","assign","task","_interceptErrorEvent","error","_error","Error","message","code","_subscribe","nextOrObserver","complete","_this2","_next","_complete","next","_addListener","TaskEvent","STATE_CHANGED","_removeListener","on","event","arguments","length","undefined","pause","resume","cancel","default"],"sources":["C:/Users/Johnny Hermitano/Documents/GitHub/sofdes_watermelon/project/node_modules/react-native-firebase/dist/modules/storage/task.js"],"sourcesContent":["/**\n * \n * UploadTask representation wrapper\n */\nimport { statics as StorageStatics } from './';\nimport { isFunction } from '../../utils';\nexport const UPLOAD_TASK = 'upload';\nexport const DOWNLOAD_TASK = 'download';\n\n/**\n * @url https://firebase.google.com/docs/reference/js/firebase.storage.UploadTask\n */\nexport default class StorageTask {\n  constructor(type, promise, storageRef) {\n    this.type = type;\n    this.ref = storageRef;\n    this.storage = storageRef._storage;\n    this.path = storageRef.path; // 'proxy' original promise\n\n    this.then = promise.then.bind(promise);\n    this.catch = promise.catch.bind(promise);\n  }\n  /**\n   * Intercepts a native snapshot result object attaches ref / task instances\n   * and calls the original function\n   * @returns {Promise.<T>}\n   * @private\n   */\n\n\n  _interceptSnapshotEvent(f) {\n    if (!isFunction(f)) return null;\n    return snapshot => {\n      const _snapshot = Object.assign({}, snapshot);\n\n      _snapshot.task = this;\n      _snapshot.ref = this.ref;\n      return f && f(_snapshot);\n    };\n  }\n  /**\n   * Intercepts a error object form native and converts to a JS Error\n   * @param f\n   * @returns {*}\n   * @private\n   */\n\n\n  _interceptErrorEvent(f) {\n    if (!isFunction(f)) return null;\n    return error => {\n      const _error = new Error(error.message); // $FlowExpectedError\n\n\n      _error.code = error.code;\n      return f && f(_error);\n    };\n  }\n  /**\n   *\n   * @param nextOrObserver\n   * @param error\n   * @param complete\n   * @returns {function()}\n   * @private\n   */\n\n\n  _subscribe(nextOrObserver, error, complete) {\n    let _error;\n\n    let _next;\n\n    let _complete;\n\n    if (typeof nextOrObserver === 'function') {\n      _error = this._interceptErrorEvent(error);\n      _next = this._interceptSnapshotEvent(nextOrObserver);\n      _complete = this._interceptSnapshotEvent(complete);\n    } else if (nextOrObserver) {\n      _error = this._interceptErrorEvent(nextOrObserver.error);\n      _next = this._interceptSnapshotEvent(nextOrObserver.next);\n      _complete = this._interceptSnapshotEvent(nextOrObserver.complete);\n    }\n\n    if (_next) {\n      this.storage._addListener(this.path, StorageStatics.TaskEvent.STATE_CHANGED, _next);\n    }\n\n    if (_error) {\n      this.storage._addListener(this.path, `${this.type}_failure`, _error);\n    }\n\n    if (_complete) {\n      this.storage._addListener(this.path, `${this.type}_success`, _complete);\n    }\n\n    return () => {\n      if (_next) this.storage._removeListener(this.path, StorageStatics.TaskEvent.STATE_CHANGED, _next);\n      if (_error) this.storage._removeListener(this.path, `${this.type}_failure`, _error);\n      if (_complete) this.storage._removeListener(this.path, `${this.type}_success`, _complete);\n    };\n  }\n  /**\n   *\n   * @param event\n   * @param nextOrObserver\n   * @param error\n   * @param complete\n   * @returns {function()}\n   */\n\n\n  on(event = StorageStatics.TaskEvent.STATE_CHANGED, nextOrObserver, error, complete) {\n    if (!event) {\n      throw new Error(\"StorageTask.on listener is missing required string argument 'event'.\");\n    }\n\n    if (event !== StorageStatics.TaskEvent.STATE_CHANGED) {\n      throw new Error(`StorageTask.on event argument must be a string with a value of '${StorageStatics.TaskEvent.STATE_CHANGED}'`);\n    } // if only event provided return the subscriber function\n\n\n    if (!nextOrObserver && !error && !complete) {\n      return this._subscribe.bind(this);\n    }\n\n    return this._subscribe(nextOrObserver, error, complete);\n  }\n\n  pause() {\n    throw new Error('.pause() is not currently supported by react-native-firebase');\n  }\n\n  resume() {\n    // todo\n    throw new Error('.resume() is not currently supported by react-native-firebase');\n  }\n\n  cancel() {\n    // todo\n    throw new Error('.cancel() is not currently supported by react-native-firebase');\n  }\n\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}