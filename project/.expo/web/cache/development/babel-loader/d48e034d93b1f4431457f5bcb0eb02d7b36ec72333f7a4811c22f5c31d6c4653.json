{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport { objectToUniqueId } from \"../../utils\";\nvar Query = function () {\n  function Query(ref, existingModifiers) {\n    _classCallCheck(this, Query);\n    this.modifiers = existingModifiers ? _toConsumableArray(existingModifiers) : [];\n    this._reference = ref;\n  }\n  return _createClass(Query, [{\n    key: \"orderBy\",\n    value: function orderBy(name, key) {\n      this.modifiers.push({\n        id: `orderBy-${name}:${key || ''}`,\n        type: 'orderBy',\n        name: name,\n        key: key\n      });\n      return this._reference;\n    }\n  }, {\n    key: \"limit\",\n    value: function limit(name, _limit) {\n      this.modifiers.push({\n        id: `limit-${name}:${_limit}`,\n        type: 'limit',\n        name: name,\n        limit: _limit\n      });\n      return this._reference;\n    }\n  }, {\n    key: \"filter\",\n    value: function filter(name, value, key) {\n      this.modifiers.push({\n        id: `filter-${name}:${objectToUniqueId(value)}:${key || ''}`,\n        type: 'filter',\n        name: name,\n        value: value,\n        valueType: typeof value,\n        key: key\n      });\n      return this._reference;\n    }\n  }, {\n    key: \"getModifiers\",\n    value: function getModifiers() {\n      return _toConsumableArray(this.modifiers);\n    }\n  }, {\n    key: \"queryIdentifier\",\n    value: function queryIdentifier() {\n      var sortedModifiers = this.getModifiers().sort(function (a, b) {\n        if (a.id < b.id) return -1;\n        if (a.id > b.id) return 1;\n        return 0;\n      });\n      var key = '{';\n      for (var i = 0; i < sortedModifiers.length; i++) {\n        if (i !== 0) key += ',';\n        key += sortedModifiers[i].id;\n      }\n      key += '}';\n      return key;\n    }\n  }]);\n}();\nexport { Query as default };","map":{"version":3,"names":["objectToUniqueId","Query","ref","existingModifiers","_classCallCheck","modifiers","_toConsumableArray","_reference","_createClass","key","value","orderBy","name","push","id","type","limit","filter","valueType","getModifiers","queryIdentifier","sortedModifiers","sort","a","b","i","length","default"],"sources":["C:/Users/Johnny Hermitano/Documents/GitHub/sofdes_watermelon/project/node_modules/react-native-firebase/dist/modules/database/Query.js"],"sourcesContent":["/**\n * \n * Query representation wrapper\n */\nimport { objectToUniqueId } from '../../utils';\n// todo doc methods\n\n/**\n * @class Query\n */\nexport default class Query {\n  constructor(ref, existingModifiers) {\n    this.modifiers = existingModifiers ? [...existingModifiers] : [];\n    this._reference = ref;\n  }\n  /**\n   *\n   * @param name\n   * @param key\n   * @return {Reference|*}\n   */\n\n\n  orderBy(name, key) {\n    this.modifiers.push({\n      id: `orderBy-${name}:${key || ''}`,\n      type: 'orderBy',\n      name,\n      key\n    });\n    return this._reference;\n  }\n  /**\n   *\n   * @param name\n   * @param limit\n   * @return {Reference|*}\n   */\n\n\n  limit(name, limit) {\n    this.modifiers.push({\n      id: `limit-${name}:${limit}`,\n      type: 'limit',\n      name,\n      limit\n    });\n    return this._reference;\n  }\n  /**\n   *\n   * @param name\n   * @param value\n   * @param key\n   * @return {Reference|*}\n   */\n\n\n  filter(name, value, key) {\n    this.modifiers.push({\n      id: `filter-${name}:${objectToUniqueId(value)}:${key || ''}`,\n      type: 'filter',\n      name,\n      value,\n      valueType: typeof value,\n      key\n    });\n    return this._reference;\n  }\n  /**\n   *\n   * @return {[*]}\n   */\n\n\n  getModifiers() {\n    return [...this.modifiers];\n  }\n  /**\n   *\n   * @return {*}\n   */\n\n\n  queryIdentifier() {\n    // sort modifiers to enforce ordering\n    const sortedModifiers = this.getModifiers().sort((a, b) => {\n      if (a.id < b.id) return -1;\n      if (a.id > b.id) return 1;\n      return 0;\n    }); // Convert modifiers to unique key\n\n    let key = '{';\n\n    for (let i = 0; i < sortedModifiers.length; i++) {\n      if (i !== 0) key += ',';\n      key += sortedModifiers[i].id;\n    }\n\n    key += '}';\n    return key;\n  }\n\n}"],"mappings":";;;AAIA,SAASA,gBAAgB;AAAsB,IAM1BC,KAAK;EACxB,SAAAA,MAAYC,GAAG,EAAEC,iBAAiB,EAAE;IAAAC,eAAA,OAAAH,KAAA;IAClC,IAAI,CAACI,SAAS,GAAGF,iBAAiB,GAAAG,kBAAA,CAAOH,iBAAiB,IAAI,EAAE;IAChE,IAAI,CAACI,UAAU,GAAGL,GAAG;EACvB;EAAC,OAAAM,YAAA,CAAAP,KAAA;IAAAQ,GAAA;IAAAC,KAAA,EASD,SAAAC,QAAQC,IAAI,EAAEH,GAAG,EAAE;MACjB,IAAI,CAACJ,SAAS,CAACQ,IAAI,CAAC;QAClBC,EAAE,EAAG,WAAUF,IAAK,IAAGH,GAAG,IAAI,EAAG,EAAC;QAClCM,IAAI,EAAE,SAAS;QACfH,IAAI,EAAJA,IAAI;QACJH,GAAG,EAAHA;MACF,CAAC,CAAC;MACF,OAAO,IAAI,CAACF,UAAU;IACxB;EAAC;IAAAE,GAAA;IAAAC,KAAA,EASD,SAAAM,MAAMJ,IAAI,EAAEI,MAAK,EAAE;MACjB,IAAI,CAACX,SAAS,CAACQ,IAAI,CAAC;QAClBC,EAAE,EAAG,SAAQF,IAAK,IAAGI,MAAM,EAAC;QAC5BD,IAAI,EAAE,OAAO;QACbH,IAAI,EAAJA,IAAI;QACJI,KAAK,EAALA;MACF,CAAC,CAAC;MACF,OAAO,IAAI,CAACT,UAAU;IACxB;EAAC;IAAAE,GAAA;IAAAC,KAAA,EAUD,SAAAO,OAAOL,IAAI,EAAEF,KAAK,EAAED,GAAG,EAAE;MACvB,IAAI,CAACJ,SAAS,CAACQ,IAAI,CAAC;QAClBC,EAAE,EAAG,UAASF,IAAK,IAAGZ,gBAAgB,CAACU,KAAK,CAAE,IAAGD,GAAG,IAAI,EAAG,EAAC;QAC5DM,IAAI,EAAE,QAAQ;QACdH,IAAI,EAAJA,IAAI;QACJF,KAAK,EAALA,KAAK;QACLQ,SAAS,EAAE,OAAOR,KAAK;QACvBD,GAAG,EAAHA;MACF,CAAC,CAAC;MACF,OAAO,IAAI,CAACF,UAAU;IACxB;EAAC;IAAAE,GAAA;IAAAC,KAAA,EAOD,SAAAS,aAAA,EAAe;MACb,OAAAb,kBAAA,CAAW,IAAI,CAACD,SAAS;IAC3B;EAAC;IAAAI,GAAA;IAAAC,KAAA,EAOD,SAAAU,gBAAA,EAAkB;MAEhB,IAAMC,eAAe,GAAG,IAAI,CAACF,YAAY,CAAC,CAAC,CAACG,IAAI,CAAC,UAACC,CAAC,EAAEC,CAAC,EAAK;QACzD,IAAID,CAAC,CAACT,EAAE,GAAGU,CAAC,CAACV,EAAE,EAAE,OAAO,CAAC,CAAC;QAC1B,IAAIS,CAAC,CAACT,EAAE,GAAGU,CAAC,CAACV,EAAE,EAAE,OAAO,CAAC;QACzB,OAAO,CAAC;MACV,CAAC,CAAC;MAEF,IAAIL,GAAG,GAAG,GAAG;MAEb,KAAK,IAAIgB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,eAAe,CAACK,MAAM,EAAED,CAAC,EAAE,EAAE;QAC/C,IAAIA,CAAC,KAAK,CAAC,EAAEhB,GAAG,IAAI,GAAG;QACvBA,GAAG,IAAIY,eAAe,CAACI,CAAC,CAAC,CAACX,EAAE;MAC9B;MAEAL,GAAG,IAAI,GAAG;MACV,OAAOA,GAAG;IACZ;EAAC;AAAA;AAAA,SA3FkBR,KAAK,IAAA0B,OAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}